<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Cadastro | The Advocate</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>

  <!-- Navegação -->
     <nav>
    <ul class="menu">
      <li><a href="assets/html/cadastro.html">Cadastro</a></li>
      <li><a href="../../index.html">Início</a></li>
    </ul>

    <form class="search-form" onsubmit="buscar(event)">
  <input class="input-pesquisa" type="search" id="campo-pesquisa" placeholder="Pesquisar...">
</form>
  </nav>


  <!-- Logo -->
  <div class="logo-site">
    <img src="../images/logotheadvocatesemfundo.png" alt="Logo The Advocate" width="300">
  </div>

  <!-- Formulário de cadastro -->
 <section class="formulario-cadastro">
  <h2>Cadastre-se</h2>
  <form id="form-cadastro">
    <label for="nome">Nome completo</label>
    <input type="text" id="nome" name="nome" required>

    <label for="email">E-mail</label>
    <input type="email" id="email" name="email" required>

    <label for="senha">Senha</label>
    <input type="password" id="senha" name="senha" required>

    <button type="submit">Cadastrar</button>
  </form>
</section>
  <!-- Footer -->
  <footer class="rodape">
    <p>&copy; 2025 The Advocate. Todos os direitos reservados.</p>
    <p class="frase-final">"Mesmo os deuses precisam de leitores atentos."</p>
  </footer>

  <!-- Scripts -->
  <script src="assets/scripts/app.js"></script>
  <script>
  const form = document.getElementById("form-cadastro");

  form.addEventListener("submit", function (e) {
    e.preventDefault();

    const nome = document.getElementById("nome").value.trim();
    const email = document.getElementById("email").value.trim();
    const senha = document.getElementById("senha").value;

    if (!nome || !email || !senha) {
      alert("Por favor, preencha todos os campos.");
      return;
    }

    if (senha.length < 6) {
      alert("A senha deve ter pelo menos 6 caracteres.");
      return;
    }

    // Enviar para o JSON Server
    fetch("http://localhost:3001/usuarios", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        nome: nome,
        email: email,
        senha: senha
      })
    })
    .then(res => {
      if (!res.ok) {
        throw new Error("Erro ao cadastrar");
      }
      return res.json();
    })
    .then(data => {
      alert("Cadastro realizado com sucesso!");
      form.reset();
      console.log("Usuário salvo:", data);
    })
    .catch(err => {
      console.error("Erro:", err);
      alert("Erro ao cadastrar usuário.");
    });
  });
</script>
</body>
</html>